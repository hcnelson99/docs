\ProvidesPackage{common/common}[2017/05/29 v1.0 common commands]



\newcommand{\typeDef}[3]{
	#1\ : #2 \ldots #3}

\newcommand{\typeDefSub}[2]{
	\text{\texttt{type}}\; #1\ \leqslant #2}

\newcommand{\typeDefSup}[2]{
	\text{\texttt{type}}\; #1\ \geqslant #2}
	
\newcommand{\typeDefExt}[2]{
	\text{\texttt{type}}\; #1\ =\ #2}
	
\newcommand{\typeInit}[2]{
	\text{\texttt{type}}\; #1\ =\ #2}
	
\newcommand{\arrowType}[3]{
	#1^#2 \rightarrow #3}
	
\newcommand{\valType}[2]{
	\text{\texttt{val}}\; #1\ : #2}
	
\newcommand{\valInit}[2]{
	\text{\texttt{val}}\; #1\ = #2}
	
\newcommand{\refn}[3]{
	#1\{#2 \Rightarrow #3\}}
	
\newcommand{\structType}[2]{
	\{#1 \Rightarrow #2\}}
	
\newcommand{\defType}[4]{
	\text{\texttt{def}}\; #1\ : \arrowType{#3}{#2}{#4}}
	
\newcommand{\defInit}[4]{
	\text{\texttt{def}}\; #1\ (#2:#3) =  #4}
	
	
	
\newcommand{\red}[1]{
	\color{red}#1 \color{black}
}
\newcommand{\blue}[1]{
	\color{blue}#1 \color{black}
}

\newcommand{\Fsub}{
	System F$_{<:}$
}

\newcommand{\algTurn}{
	\mathrlap{\; \vdash}\mapsto
}



%--------------------------------------------------------------------------------------------------
% Structural types
\makeatletter 


\newcommand{\struct}[1]{%
	\left\{ #1 \Rightarrow
		\begin{array}{l}
			\@structi
}

\newcommand\@structi{\@ifnextchar\endstruct{\@structend}{\@structii}}

\newcommand\@structii[1]{%
  \@structiii{#1}
  \@structi 
}
\newcommand\@structiii[1]{%
	#1\\}
\newcommand\@structend[1]{
	\vspace*{-\bigskipamount}
	\end{array}
	\right\}}
\makeatother


%--------------------------------------------------------------------------------------------------	
	
% Algorithmmic subtype check
\makeatletter 


\newcommand{\subtypeAlgorithm}{%
		\[
		\begin{array}{llr}
			\@algStep
}

\newcommand\@algStep{\@ifnextchar\endSubtypeAlgorithm{\@algend}{\@stepi}}

\newcommand\@stepi[5]{%
  \@stepii{#1}{#2}{#3}{#4}{#5}
  \@algStep 
}
\newcommand\@stepii[5]{%
	\\#1 & #2 & 
	\begin{array}{c}
		#3\ 
		#4\
		#5 
	\end{array}\\
	
%	\hline
	}
\newcommand\@algend[1]{
	\vspace*{-\bigskipamount}
	\end{array}
	\]
	}
\makeatother


%--------------------------------------------------------------------------------------------------	
	
% Syntax Construct
\makeatletter 

\newenvironment{syntax}
    {
    \begin{array}{llr}
    }
    { 
    \end{array}
    }

\newcommand{\syntaxElement}[2]{%
		#1 & ::= & \text{\bf{#2}} \\
			\@syntaxEntry
}

\newcommand\@syntaxEntry{\@ifnextchar\endSyntaxElement{\@syntaxElementEnd}{\@syntaxEntryCheck}}

\newcommand\@syntaxEntryCheck[2]{%
  \@syntaxEntryMake{#1}{#2}
  \@syntaxEntry
}
\newcommand\@syntaxEntryMake[2]{%
	& #1 & \text{\emph{#2}} \\
	}
\newcommand\@syntaxElementEnd[1]{
	\vspace*{-\bigskipamount}
	}
\makeatother